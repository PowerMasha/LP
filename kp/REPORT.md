# Отчет по курсовому проекту
## по курсу "Логическое программирование"

### студент: Алексеева М.А

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |               |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*

## Введение

В ходе выполнения курсового проекта, я столкнулась с некоторыми сложностями, но в конечном результате преодолела их и получила новые знания. Я научилась писать парсер и разобралась с новым для меня расширение GEDCOM. Для выполнения 4 задания потребовались знания поиска в ширину, пришлось также обновлять знания по этой теме.

## Задание

 1. Создать родословное дерево своего рода на несколько поколений (3-4) назад в стандартном формате GEDCOM с использованием сервиса MyHeritage.com 
 2. Преобразовать файл в формате GEDCOM в набор утверждений на языке Prolog, используя следующее представление: с использованием предикатов parents(потомок, отец, мать).
 3. Реализовать предикат проверки/поиска деверя (брата мужа).
 4. Реализовать программу на языке Prolog, которая позволит определять степень родства двух произвольных индивидуумов в дереве


## Получение родословного дерева

Мое родословное дерево было создано при помощи сервиса MyHeritage.com, в нем 23 человека. Затем я экспортировала это дерево, с помощью встроенных в сервис функций, и получила файл в формате GEDCOM. Столкнулась с трудностью, что если человек в дереве имеет только имя, без фамилии, то функция считывания полного имени (фамилия+имя) как бы не замечает этого человека. Поэтому, к своему стыду, пришлось некоторым соим родственникам придумывать фамилии.

## Конвертация родословного дерева
Так как конвертация подразумевает довольно большую работу со строковыми данными, то я предпочла использовать язык программирования python3, несмотря на то, что знания по нему весьма скудны. В программе создано два класса, класс семью и класс личности, которые содержат в себе функции взятия индивидуального номера (id), имени, фамилии, пола, также реализованы функции добавления мужа,жены и ребенка в "семью". 
``` Python
def main():
	persons, families = parse('tree.txt')
	get_predicats(families, persons)
```

## Предикат поиска родственника
Согласно варианту, мне нужно реализовать предикат по поиску деверя(брата мужа).
Муж-это тот с кем у тебя общий ребенок, поэтому необходимо создать предикат по поиску ребенка. 
``` Prolog
child(X, Y) :- 
    parents(X, Z, Y);
    parents(X, Y, Z).
 ```
Были введено разграничение по полу (мужчина, женщина) для определения такой родственной связи как брат и сестра.
``` Prolog
brother(X, Y) :- 
    parents(X, F, M),
    parents(Y, F, M),
    X\=Y, male(Y).

sister(X, Y) :- 
    parents(X, F, M),
    parents(Y, F, M),
    X\=Y, female(Y).
  ```
Для нахождения деверя установили связь между мужем и женой, а затем связь между мужем и братом. Предикат dever() выглядит следующим образом:
``` Prolog
dever(Y,X) :- 
	parents(_,A,X),
	brother(A,Y).
  ```

## Определение степени родства

Далее реализую предикаты отношений relative(). Существующие отношения отец, мать, ребенок, брат, сестра отображаются сразу , выводится "статус", иначе если родственная связь "нестандартая" будет отображен путь от редственника к родственнику,при помощи поиска вширину.

``` Prolog

relative(sister, Sister, Brother) :-
    sister(Sister, Brother).

relative(brother, Brother, Sister) :-
    brother(Brother, Sister).

relative(child, Child, Parent) :-
    parents(Child, _, Parent);
    parents(Child, Parent, _).
   
relative(father, Father, Child) :-
    parents(Child, Father, _).

relative(mother, Mother, Child) :-
    parents(Child, _, Mother).

relative(husband, Husband, Wife) :-
    parents(_, Husband, Wife), !.
 
relative(Way, First, Last) :-
    dpath(First, Last, Way), !. 
  
```
Затем, используя поиск в ширину, находим кратчайшее отношение родства.Собираем цепочку их родственников и выводим ее.

Результат работы предиката:
```Prolog
?- relative(mother,X, 'Мария Алексеева').
X = 'Любовь Рябова'.
?- relative(Way,'Евгений Никифоров','Наталья Харина').
child - child - wife - father - 
Way = [father, wife, child, child].
?- relative(Way,'Евгений Никифоров','Юлия Обыденкова').
Way = double ;
child - child - wife - father - wife - father - 
Way = [father, wife, father, wife, child, child].
```

## Выводы
Этот курсовой проект дался мне не очень легко, из-за работы с незнакомым мне языком, поэтому пришлось потратить много времени на его поверхностное изучение для выполнения поставленой задачи. Но благодаря этому я освоила новые знания, научилась работать с некоторыми функциями, познакомилась с синтаксисом языка python3.


